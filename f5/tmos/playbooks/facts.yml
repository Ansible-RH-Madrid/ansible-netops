---
- name: "Collect F5: Facts"
  hosts: tmos:&{{ bigip_server }}
  connection: local
  gather_facts: no
  tasks:
    - name: Gather BIG-IP facts
      bigip_device_facts:
        server: "{{ ansible_host | default(omit) }}"
        server_port: "{{ ansible_httpapi_port | default(omit) }}"
        gather_subset:
          - all
      register: bigip_device_facts

    - name: Debug bigip_device_facts
      debug:
        var: bigip_device_facts
        verbosity: 2
