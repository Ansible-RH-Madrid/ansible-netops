- name: "Portchannel Provisioning"
  hosts: all
  connection: network_cli

  vars:
    group: 1
    members: [ 'Ethernet1/1', 'Ethernet1/2' ]
    mode: active
    state: present

  tasks:
    - name: "Ensure portchannel {{ group }} is {{ mode }}"
      nxos_portchannel:
        group: "{{ group }}"
        members: "{{ members }}"
        mode: "{{ mode }}"
        state: "{{ state }}"
